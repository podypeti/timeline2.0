<!DOCTYPE html>
<html lang="en">
<head> 
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>History Timeline</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>

  <!-- Timeline Canvas -->


<div id="timelineContainer">
  <!-- Top toolbar -->
  <div class="timelineToolbar">
    <details class="legend-panel">
      <summary>Categories</summary>
      <div class="legend-content">
        <input id="legendSearch" type="search" placeholder="Search categories…" />
        <div id="legend"></div>
      </div>
    </details>

    <!-- NEW: Event search -->
    <input
      id="eventSearch"
      class="toolbarSearch"
      type="search"
      placeholder="Search events… (title, text, date, group)"
      aria-label="Search events"
    />

    <div class="toolbarSpacer"></div>

    <div class="zoomGroup">
      <button id="zoomOut" class="ghost" title="Zoom out">−</button>
      <button id="zoomIn"  class="ghost" title="Zoom in">+</button>
    </div>
  </div>

  <!-- Canvas -->
  <canvas id="timelineCanvas" width="1200" height="560" aria-label="Timeline"></canvas>
</div>

  <!-- Details Panel -->
  <aside id="detailsPanel" class="details hidden" role="dialog" aria-modal="true">
    <button id="detailsClose" class="close" aria-label="Close">×</button>
    <div id="detailsContent"></div>
  </aside>

  <!-- Pan Slider
  <div class="panSliderBar">
    <span class="panLabel">Center:</span>
    <input id="panSlider" type="range" />
    <span id="panValue" class="panValue">1 CE</span>
  </div> -->

  <!-- Scripts -->
  <script src="./timeline.js"></script>
 

<script>
  async function start() {
    try {
      // Load your CSV (adjust path if your file lives elsewhere)
      const rows = await loadCsv('timeline-data.csv');

      // Make available to timeline.js logic
      window.events = rows;

      // Build legend, set initial zoom/pan, draw once
      buildLegend();
      initScaleAndPan();
      draw();
    } catch (err) {
      console.error('[timeline] failed to load CSV', err);
      // Optional: show a small inline notice like in your screenshot
      const detailsContent = document.getElementById('detailsContent');
      const detailsPanel = document.getElementById('detailsPanel');
      if (detailsContent && detailsPanel) {
        detailsContent.innerHTML = `<p><strong>Error:</strong> Could not load CSV. Check URL and CORS.</p>`;
        detailsPanel.classList.remove('hidden');
      }
    }
  }

  // Run when DOM is ready
  document.addEventListener('DOMContentLoaded', start);
</script>


  <button id="resetZoomFloating" class="resetFloating" title="Reset">Reset</button>
</body>
</html>
